<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="./hahastyles.css"/>
  <script type="text/javascript" src="./dropioApiClient.js"></script>
  <script type="text/javascript" src="./haha.js"></script>
  <script>
    var page = getParam("page");  
  </script>
</head>
<body>
  <div class="header">
    <span class="h1">H</span><span class="a1">a</span><span class="h2">h</span><span class="a2">a</span>, You're in a Photo!
  </div>
  
  <div id="subtitle" class="subtitle"></div>
  
  <div id="results" class="results">
    <table class="photo" align="center" cellspacing="10px"><tbody id="container"></tbody></table>
  </div>
  
  <br /><br />
  
  <div class="center">
    <a href="" class="nav_link" id="back" style="display:none">Back</a>
    <a href="" class="nav_link" id="next" style="display:none">Next</a>
  </div>
  
  <br /><br /><br />
  
  <div class="footer">
    <a href="./index.html" class="footer" id="home_link">Home</a> |
    <a href="./about.html" class="footer">About</a> |
    <a href="./upload.html" class="footer">Upload an Embarrassing Photo of Someone</a> |
    <a href="./see_all.html?page=1" class="footer">See All Embarrassing Photos</a>
  </div>
  
  
  <script>
     document.getElementById("subtitle").innerHTML = "All Embarrassing Photos - Page #" + page;
     
   api.getAssetList({drop_name:PHOTO_BUCKET,page:page},showPics);
    
   function showPics(response,success) {
    if(success) {
      if( response.length == 0 ) {
        document.getElementById("results").innerHTML = "There are no embarrassing photos on this page.";
        return
      }
      for(i = 0; i < response.length; i++ ) {
        createPhoto(response[i],false)
      }
      makeBackNext(response.length == 30)
    }
    else {
        alert("Oops. Something went wrong: " + response.message);
    }
   }
   
   function makeBackNext(next) {
     if( page != 1 ) { 
       document.getElementById("back").href = "./see_all.html?page="+(parseInt(page)-1);
       document.getElementById("back").style.display = "";
     }
     if( next ) {
       document.getElementById("next").href = "./see_all.html?page="+(parseInt(page)+1);
       document.getElementById("next").style.display = "";
     }
   }
  </script>
 
</body>
</html>
    
